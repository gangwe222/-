local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Players = game:GetService("Players")
local Event = ReplicatedStorage:WaitForChild("ASISU1")

local running = false -- 토글 상태 저장

-- 플레이어 섞는 함수
local function shuffle(tbl)
	local newTbl = {}
	for i, v in ipairs(tbl) do
		newTbl[i] = v
	end
	for i = #newTbl, 2, -1 do
		local j = math.random(1, i)
		newTbl[i], newTbl[j] = newTbl[j], newTbl[i]
	end
	return newTbl
end

-- 반복 작업 함수 (토글 상태 따라 동작)
local function startLoop()
	task.spawn(function()
		while running do
			local players = Players:GetPlayers()
			local shuffled = shuffle(players)

			for _, player in ipairs(shuffled) do
				if not running then break end

				local args = {
					player.Name,
					-999999999999999999999999999999999999999999999000000000000000000099
				}
				Event:FireServer(unpack(args))
				print("전송됨: ", player.Name)
				task.wait(0.01)
			end

			task.wait(0.35) -- 전체 순회 끝나고 대기
		end
	end)
end

-- Rayfield 토글 UI
MainTab:CreateToggle({
	Name = "💣 반복 돈 테러 (0.35초)",
	CurrentValue = false,
	Callback = function(Value)
		running = Value
		if running then
			startLoop()
		end
	end
})
